$(function(){"use strict";var e,t,s=document.getElementById("CSVFile"),a=document.getElementById("CSVGet"),o=/^(https?:\/\/)?([\da-z\.-]+)\.([0-9a-z\.]{2,6})*([\/\w-]+)\.csv\/?$/,i=$(".request-status"),l="Cool! That's some fancy data you got there",n="Darn, looks like something went wrong :(",r="is-hidden";$.dataSetupPopups(".popup"),$.dataBindLabels(),$.dataSupressFormClass(".l-form"),$.dataShowIfChecked("#custom","label[for=customDelimeter], #customDelimeter"),$.dataShowIfChecked("[name=delimeter]",".step3"),$(s).on("keyup",function(t){return 13===t.which?(t.preventDefault(),!1):(a.disabled=!0,clearTimeout(e),e=setTimeout(function(){o.test(s.value)?(s.className="is-valid",a.disabled=!1):(s.className="is-invalid",a.disabled=!0)},500),void 0)}),$(".l-form_inputfile").on("submit",function(e){e.preventDefault(),$(s).hasClass("is-valid")&&($(a).addClass("show-spinner"),data.load(s.value,{type:"GET",callback:function(e){$(a).removeClass("show-spinner"),$(i).text(l),$(i).addClass("is-show").removeClass("status_fail").addClass("status_good"),t=e,$(".step1 .overlay").removeClass(r),$(".step2").removeClass(r)},fail:function(){$(a).removeClass("show-spinner"),$(i).text(n),$(i).addClass("is-show").removeClass("status_good").addClass("status_fail")}}),setTimeout(function(){$(i).removeClass("is-show")},3e3))}),$("#textinput").find(".btn-success").on("click",function(){t=$("#textinput").find("textarea").val(),$(".step2").removeClass(r),$(".step1 .overlay").removeClass(r)}),$("#textinput").find("textarea").on("keyup",function(){$(this).val()?$("#textinput").find(".btn-success").prop("disabled",!1):$("#textinput").find(".btn-success").prop("disabled",!0)}),$(".btn_process").on("click",function(){var e=$("#customDelimeter").val()?$("#customDelimeter").val():",",s=$("#error");return s.find("p").first(),$(".overlay[data-popup=error]"),$("#custom").is(":checked")&&""===$("#customDelimeter").val()?($.dataThrowError("You didn't fill in your custom delimeter. I'm sure you'll get it right next time."),!1):($.dataShowPopup("dataProcess"),setTimeout(function(){$(window).trigger("doProcess",[t,e])},500),void 0)})});